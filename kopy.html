<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Recherche ‚Äî Horreur</title>
<style>
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;background:#070407;color:#e6e6e6}
  .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:36px}
  .logo{font-weight:900;font-size:56px;letter-spacing:6px;margin-bottom:18px;color:#a33}
  .panel{width:100%;max-width:800px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.15));padding:20px;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.6);backdrop-filter:blur(2px)}
  .searchRow{display:flex;gap:12px;align-items:center}
  input[type=text]{flex:1;padding:12px 14px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit;font-size:16px}
  select{padding:10px;border-radius:8px;background:rgba(0,0,0,0.25);color:inherit;border:1px solid rgba(255,255,255,0.04)}
  .btn{padding:10px 14px;border-radius:8px;border:0;background:#8b0000;color:#fff;font-weight:700;cursor:pointer}
  .hint{margin-top:12px;color:#bbb;font-size:14px}

  /* results */
  .results{margin-top:18px}
  .result{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;margin-bottom:10px;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
  .result:hover{transform:translateY(-4px);}

  /* horror effects */
  .darken{background:#000}
  .scanline:before{content:'';position:fixed;inset:0;pointer-events:none;background-image:linear-gradient(rgba(0,0,0,0) 50%, rgba(255,255,255,0.02) 51%);mix-blend-mode:overlay;opacity:0.6}
  .glitch{
    position:relative;
    color:transparent;
    text-shadow:0 0 6px rgba(255,0,0,0.8);
  }
  .glitch:before,.glitch:after{content:attr(data-text);position:absolute;left:0;top:0;width:100%;}
  .glitch:before{left:2px;text-shadow:-2px 0 #ff2d55;clip-path:polygon(0 0,100% 0,100% 40%,0 40%);animation:glitchTop 2.3s infinite}
  .glitch:after{left:-2px;text-shadow:-2px 0 #00e6ac;clip-path:polygon(0 60%,100% 60%,100% 100%,0 100%);animation:glitchBot 2.6s infinite}
  @keyframes glitchTop{0%{transform:translate(0,0)}20%{transform:translate(-6px,-2px)}40%{transform:translate(4px,0)}60%{transform:translate(-2px,2px)}100%{transform:translate(0,0)}}
  @keyframes glitchBot{0%{transform:translate(0,0)}25%{transform:translate(6px,1px)}50%{transform:translate(-4px,0)}75%{transform:translate(2px,-1px)}100%{transform:translate(0,0)}}

  /* floating face */
  .face{position:fixed;right:6%;top:12%;font-size:160px;opacity:0;transform:scale(0.8);transition:opacity .6s,transform .6s;pointer-events:none;filter:blur(0.8px)}
  .face.show{opacity:1;transform:scale(1);}

  /* shaking */
  .shake{animation:shake .6s ease-in-out}
  @keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(2px)}100%{transform:translateX(0)}}

  /* scrambled text */
  .scramble{font-family:monospace}

  @media (max-width:560px){.logo{font-size:36px}.face{font-size:100px;right:2%;top:6%}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="logo">RECHERCHE</div>

    <div class="panel" id="panel">
      <div class="searchRow">
        <input id="q" type="text" placeholder="Tape quelque chose... si tu l'oses" />
        <select id="site">
          <option value="bibliotheque">La Biblioth√®que Oubli√©e</option>
          <option value="forum">Le Forum des Murmures</option>
          <option value="archives">Archives Interdites</option>
          <option value="wiki">Wikiphant√¥me</option>
        </select>
        <button class="btn" id="go">Explorer</button>
      </div>
      <div class="hint">Choisis un site, puis clique sur un r√©sultat ‚Äî ne dis pas que je ne t'avais pas pr√©venu.</div>

      <div class="results" id="results" aria-live="polite"></div>
    </div>
  </div>

  <div class="face" id="face">üëÅÔ∏è</div>

<script>
  const q = document.getElementById('q');
  const site = document.getElementById('site');
  const go = document.getElementById('go');
  const results = document.getElementById('results');
  const panel = document.getElementById('panel');
  const face = document.getElementById('face');

  // fake search results
  function fakeResults(term){
    const base = ['Entr√©e perdue', 'Journal d√©chir√©', 'Note ras√©e', 'Photographie floue', 'Message cod√©'];
    return base.map((t,i)=>({title: `${t} ‚Äî ${term || '‚Ä¶'}`, id: 'r'+i}));
  }

  function renderResults(list){
    results.innerHTML = '';
    list.forEach(it=>{
      const el = document.createElement('div');
      el.className = 'result';
      el.textContent = it.title;
      el.dataset.id = it.id;
      el.addEventListener('click', ()=>openResult(it));
      results.appendChild(el);
    });
  }

  // create unsettling audio (drone + glitch)
  async function playHorror(){
    try{
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const o2 = ctx.createOscillator();
      const g = ctx.createGain();
      const g2 = ctx.createGain();
      o.type='sine';o.frequency.value=60; // low drone
      o2.type='triangle';o2.frequency.value=120;
      g.gain.value=0.02;g2.gain.value=0.01;
      o.connect(g);o2.connect(g2);g.connect(ctx.destination);g2.connect(ctx.destination);
      o.start();o2.start();
      // subtle pitch shift
      let t=0;const inv=setInterval(()=>{o.frequency.value = 55 + Math.sin(t)*6; t+=0.04;},80);
      // stop after a while
      setTimeout(()=>{clearInterval(inv);o.stop();o2.stop();ctx.close();},4200);
    }catch(e){/* ignore audio errors */}
  }

  function openResult(item){
    // harmless: do not navigate away
    // apply visual corruption depending on chosen site
    document.body.classList.add('darken','scanline');
    panel.classList.add('shake');
    face.classList.add('show');

    // glitch the clicked element
    const el = [...results.children].find(c=>c.dataset.id===item.id);
    if(el){
      el.classList.add('glitch');
      el.setAttribute('data-text', el.textContent);
    }

    // scramble other text slowly
    scrambleText(panel, 1200);

    // play audio
    playHorror();

    // site-specific weirdness
    const s = site.value;
    if(s==='bibliotheque'){
      // fade letters in background
      hauntLetters(item.title);
    } else if(s==='forum'){
      weirdCursor();
    } else if(s==='archives'){
      flashImages();
    } else if(s==='wiki'){
      floodWithNotes();
    }

    // after effects, calm down
    setTimeout(()=>{
      panel.classList.remove('shake');
      // some effects stay; allow user to reset
      addResetButton();
    },1500);
  }

  function scrambleText(container,duration){
    const original = container.textContent;
    const chars = 'abcdefghijklmnopqrstuvwxyz0123456789√ß√†√©-[]{}<>/\|';
    const start = Date.now();
    const iv = setInterval(()=>{
      let out = '';
      for(let i=0;i<original.length;i++){
        out += Math.random()<0.28 ? chars[Math.floor(Math.random()*chars.length)] : original[i];
      }
      container.textContent = out;
      if(Date.now()-start>duration){
        clearInterval(iv);
        container.textContent = original;
      }
    },60);
  }

  function hauntLetters(text){
    // sprinkle letters across the screen that fade
    for(let i=0;i<28;i++){
      const span = document.createElement('div');
      span.textContent = text.charAt(Math.floor(Math.random()*text.length))||'‚Ä¢';
      span.style.position='fixed';
      span.style.left = Math.random()*90+'%';
      span.style.top = Math.random()*90+'%';
      span.style.fontSize = (12+Math.random()*58)+'px';
      span.style.opacity = 0.02;
      span.style.color = '#c0392b';
      span.style.transition = 'opacity 1s linear,transform 1s ease';
      document.body.appendChild(span);
      setTimeout(()=>{span.style.opacity=0.9; span.style.transform='translateY(-40px) rotate('+ (Math.random()*90-45) +'deg)';},50+Math.random()*300);
      setTimeout(()=>{span.remove();},3000+Math.random()*2000);
    }
  }

  function weirdCursor(){
    // small element follows cursor with lag and eeriness
    const dot = document.createElement('div');
    dot.style.position='fixed';dot.style.width='14px';dot.style.height='14px';dot.style.borderRadius='50%';dot.style.background='rgba(255,40,40,0.9)';dot.style.pointerEvents='none';dot.style.zIndex=9999;document.body.appendChild(dot);
    let mx=window.innerWidth/2,my=window.innerHeight/2;let cx=mx,cy=my;
    function move(e){mx=e.clientX;my=e.clientY}
    window.addEventListener('mousemove',move);
    const loop = setInterval(()=>{cx += (mx-cx)*0.18; cy += (my-cy)*0.18; dot.style.left=(cx-7)+'px'; dot.style.top=(cy-7)+'px';},16);
    setTimeout(()=>{clearInterval(loop);window.removeEventListener('mousemove',move);dot.remove();},4200);
  }

  function flashImages(){
    // briefly show a 'face' made of CSS then hide
    face.classList.add('show');
    setTimeout(()=>{face.classList.remove('show');},2400);
  }

  function floodWithNotes(){
    for(let i=0;i<14;i++){
      const n=document.createElement('div');n.textContent='NOTE ‚Äî '+Math.random().toString(36).slice(2,10);
      n.style.position='fixed';n.style.left=(10+Math.random()*80)+'%';n.style.top=(10+Math.random()*70)+'%';n.style.background='rgba(0,0,0,0.6)';n.style.padding='6px 10px';n.style.borderRadius='6px';n.style.fontSize='12px';n.style.zIndex=9999;document.body.appendChild(n);
      setTimeout(()=>{n.remove();},3500+Math.random()*2000);
    }
  }

  function addResetButton(){
    if(document.getElementById('reset')) return;
    const b=document.createElement('button');b.id='reset';b.textContent='Calmer tout';b.className='btn';b.style.position='fixed';b.style.left='16px';b.style.bottom='16px';b.style.zIndex=99999;document.body.appendChild(b);
    b.addEventListener('click',()=>{
      document.body.classList.remove('darken','scanline');
      face.classList.remove('show');
      results.querySelectorAll('.glitch').forEach(x=>{x.classList.remove('glitch');});
      b.remove();
    });
  }

  // events
  go.addEventListener('click', ()=>{
    const term = q.value.trim();
    renderResults(fakeResults(term));
    // small creepy delay
    setTimeout(()=>{if(Math.random()<0.5)playHorror();},600);
  });
  q.addEventListener('keydown', (e)=>{if(e.key==='Enter'){e.preventDefault();go.click();}});

  // autofocus
  window.addEventListener('load', ()=>{q.focus();});
</script>
</body>
</html>
